
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>UCDs (Unified Content Descriptors) &#8212; NASA-NAVO Workshops Notebooks</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/reference_notebooks/ucds_unified_content_descriptors';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Candidate List Exercise" href="../use_case_notebooks/candidate_list_exercise.html" />
    <link rel="prev" title="VO Tables" href="votables.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">NASA-NAVO Workshops Notebooks</p>
  
</a></div>
        <div class="sidebar-primary-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/NASA-NAVO/navo-workshop" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../index.html">
                    NASA-NAVO notebooks
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="basic_reference.html">Basic Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="image_access.html">Image Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="catalog_queries.html">Catalog Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="spectral_access.html">Spectral Access</a></li>
<li class="toctree-l1"><a class="reference internal" href="votables.html">VO Tables</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">UCDs (Unified Content Descriptors)</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../use_case_notebooks/candidate_list_exercise.html">Candidate List Exercise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use_case_notebooks/proposal_prep_exercise.html">Proposal Preparation Exercise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use_case_notebooks/hr_diagram_exercise.html">HR (Hertzsprung-Russell) Diagram Exercise</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../use_case_notebooks/candidate_list_solution.html">Candidate List Solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use_case_notebooks/proposal_prep_solution.html">Proposal Preparation Solution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use_case_notebooks/hr_diagram_solution.html">HR (Hertzsprung-Russell) Diagram Solution</a></li>
</ul>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../00_SETUP.html">Configuring the Workshop Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../KNOWN_ISSUES.html">Known issues and workarounds</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/NASA-NAVO/navo-workshop/main?urlpath=tree/content/reference_notebooks/ucds_unified_content_descriptors.md" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Binder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Binder logo" src="../../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/NASA-NAVO/navo-workshop" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/NASA-NAVO/navo-workshop/edit/main/content/reference_notebooks/ucds_unified_content_descriptors.md" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/NASA-NAVO/navo-workshop/issues/new?title=Issue%20on%20page%20%2Fcontent/reference_notebooks/ucds_unified_content_descriptors.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/content/reference_notebooks/ucds_unified_content_descriptors.ipynb" target="_blank"
   class="btn btn-sm btn-download-notebook-button dropdown-item"
   title="Download notebook file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li><a href="../../_sources/content/reference_notebooks/ucds_unified_content_descriptors.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>UCDs (Unified Content Descriptors)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="ucds-unified-content-descriptors">
<h1>UCDs (Unified Content Descriptors)<a class="headerlink" href="#ucds-unified-content-descriptors" title="Link to this heading">#</a></h1>
<p>Suppose you want to do something using a column that you expect to find in a bunch of different tables, like coordinates and time.  It’s a good bet that many if not most of the tables have coordinate columns, but there’s no rule about what they have to be named.</p>
<p>When doing detailed catalog queries with the TAP, you can obviously examine the columns of every table you’re interested in to find the columns you want.  Then you can hard-code the correct ones into each query for each table and service.</p>
<p>Or, you can also search for keywords like “ra” or “ascension” in the columns and their descriptions to get the columns you want automatically that way.</p>
<p>But is there are more generic way?  <a class="reference external" href="http://www.ivoa.net/documents/latest/UCD.html">Unified Content Descriptors (UCDs)</a> are a VO standard that allows table publishers to name their columns whatever they (or their contributors) want but to identify those that contain standard sorts of data.  For example, the RA column could be called “RA”, “ra”, “Right_Ascension”, etc.  But in all cases, a VO service can label the column with its UCD, which is “pos.eq.ra”.  This information is not part of the table but part of the meta-data that the service may provide with that data. Though not required of all VO services, UCDs are commonly provided precisely to make such tasks as identifying the columns of interest easier to automate.</p>
<p>This is easiest to show by example.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Generic VO access routines</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pyvo</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">vo</span>

<span class="c1"># Ignore unimportant warnings</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="s1">&#39;.*Unknown element .*&#39;</span><span class="p">,</span> <span class="n">vo</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">xml</span><span class="o">.</span><span class="n">elements</span><span class="o">.</span><span class="n">UnknownElementWarning</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s look at some tables in a little more detail.  Let’s find the Hubble Source Catalog version 3 (HSCv3), assuming there’s only one at MAST.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">services</span> <span class="o">=</span> <span class="n">vo</span><span class="o">.</span><span class="n">regsearch</span><span class="p">(</span><span class="n">servicetype</span><span class="o">=</span><span class="s1">&#39;tap&#39;</span><span class="p">,</span> <span class="n">keywords</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;mast&#39;</span><span class="p">])</span>
<span class="n">hsc</span><span class="o">=</span><span class="p">[</span><span class="n">s</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">services</span> <span class="k">if</span> <span class="s1">&#39;HSCv3&#39;</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">res_title</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Title: </span><span class="si">{</span><span class="n">hsc</span><span class="o">.</span><span class="n">res_title</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">hsc</span><span class="o">.</span><span class="n">res_description</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Title: MAST STScI Hubble Source Catalog Version 3 (HSCv3) TAP service
The MAST Archive at STScI TAP end point for the Hubble Source Catalog, version 3.1. The Hubble Source Catalog (HSC) is designed to optimize science from the Hubble Space Telescope by combining the tens of thousands of visit-based source lists in the Hubble Legacy Archive (HLA) into a single master catalog. The Hubble Source Catalog version 3.1 also provides proper motions for over 400,00 stars in the augmented Sagittarius Window Eclipsing Extrasolar Planet Search (SWEEPS) HST field, and the Hubble Catalog of Variables (HCV).

The Table Access Protocol (TAP) lets you execute queries against our database tables, and inspect various metadata.  Upload is not currently supported.
</pre></div>
</div>
</div>
</div>
<p>Now let’s see what tables are provided by this service for HSCv3.  Note that this is another query to the service:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tables</span> <span class="o">=</span> <span class="n">hsc</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">tables</span>  <span class="c1"># Queries for details of the service&#39;s tables</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">tables</span><span class="p">)</span><span class="si">}</span><span class="s1"> tables:&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tables</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">t</span><span class="o">.</span><span class="n">name</span><span class="si">:</span><span class="s1">30s</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="n">t</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="se">\n</span><span class="s1">----&#39;</span><span class="p">)</span>  <span class="c1"># A more succinct option than t.describe()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>13 tables:
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>tap_schema.schemas             - description of schemas in this dataset
----
tap_schema.tables              - description of tables in this dataset
----
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>tap_schema.columns             - description of columns in this dataset
----
tap_schema.keys                - description of foreign keys in this dataset
----
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>tap_schema.key_columns         - description of foreign key columns in this dataset
----
dbo.detailedcatalog            - Detailed list of source catalog parameters
----
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dbo.hcvdetailedview            - Detailed list of Hubble Catalog of Variables parameters
----
dbo.hcvsummaryview             - Summary list of Hubble Catalog of Variables parameters
----
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dbo.propermotionsview          - List of proper motion information
----
dbo.sourcepositionsview        - List of source position information
----
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dbo.summagaper2catview         - Summary list of source catalog with Aper2 magnitudes
----
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dbo.summagautocatview          - Summary list of source catalog with MagAuto magnitudes
----
dbo.catalog_image_metadata     - Summary list of Image processing metadata
----
</pre></div>
</div>
</div>
</div>
<p>Let’s look at the first 10 columns of the DetailedCatalog table.  Again, note that calling the columns attribute sends another query to the service to ask for the columns.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">columns</span><span class="o">=</span><span class="n">tables</span><span class="p">[</span><span class="s1">&#39;dbo.detailedcatalog&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">columns</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">columns</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> [</span><span class="si">{</span><span class="n">c</span><span class="o">.</span><span class="n">ucd</span><span class="si">}</span><span class="s2">]&quot;</span><span class="si">:</span><span class="s1">30s</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="n">c</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>catid [meta.id;meta.main]      - unique identifier for the catalog entry
matchid [meta.id.cross]        - identifier for the match
memid [meta.id.assoc]          - unique identifier for each source of a match
sourceid [meta.id.assoc]       - source identifier from white light (detection) image
imageid [meta.id.parent]       - identifier for the hla image
det [meta.code.status]         - is source detected in this observation (y/n)
matchra [pos.eq.ra;meta.main]  - right ascension (j2000)of match
matchdec [pos.eq.dec;meta.main] - declination (j2000) of match
sourcera [pos.eq.ra;meta.main] - right ascension (j2000)of source
sourcedec [pos.eq.dec;meta.main] - declination (j2000) of source
d [pos.angdistance]            - distance between source and match
dsigma [stat.stdev;pos.angdistance] - std dev of distance between source and match
abscorr [meta.code.status]     - astrometry correction flag
ximage [pos.cartesian.x]       - x position of source in image coordinates
yimage [pos.cartesian.y]       - y position of source in image coordinates
imagename [meta.dataset]       - hla image name
instrument [instr]             - instrument
mode [instr.setup]             - observing mode
detector [instr.setup;instr.det] - detector
aperture [instr.setup]         - aperture
exposuretime [time.duration]   - exposure time
starttime [time.start]         - observation start time
stoptime [time.end]            - observation stop time
startmjd [time.start]          - observation mjd start time
stopmjd [time.end]             - observation mjd stop time
wavelength [em.wl]             - pivot wavelength in angstroms
filter [instr.setup;instr.filter] - filter
targetname [meta.id.assoc]     - target name for observation
fluxaper2 [phot.flux]          - count rate with an aperture radius 0.3 arcsec (wfpc2); 0.15 arcsec (acs and wfc3/uvis); 0.45 arcsec (wfc3/ir)
magaper2 [phot.mag]            - magnitude  with an aperture radius 0.3 arcsec (wfpc2); 0.15 arcsec (acs and wfc3/uvis); 0.45 arcsec (wfc3/ir)
magauto [phot.mag]             - estimated total magnitude using source extractor algorithm
propid [obs.param]             - hst proposal number
ci [phot.mag;arith.diff]       - normalized (by detector and filter) mean value of concentration index defined as difference between magnitude in small and large apertures
kronradius [phys.size.radius;stat.mean] - mean value of the kron radius from source extractor
flags [meta.code.status]       - bit encoded flag: bit 0 (value 0) = point source; (value 1) = extended; bits 1 or 2 (values 2 or 4) = saturated
</pre></div>
</div>
</div>
</div>
<p>The PyVO method to get the columns will automatically fetch all the meta-data about those columns.  It’s up to the service provider to set them correctly, of course, but in this case, we see that the column named “matchra” is identified with the UCD “pos.eq.ra”.</p>
<p>So if we did not know the exact name used in HSCv3 for the RA, we could do something like this looking for the string “ra”:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ra_name</span><span class="o">=</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">columns</span> <span class="k">if</span> <span class="s1">&#39;ra&#39;</span> <span class="ow">in</span> <span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">or</span> <span class="s2">&quot;ascension&quot;</span> <span class="ow">in</span> <span class="n">c</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ra_name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;matchra&#39;, &#39;sourcera&#39;, &#39;kronradius&#39;]
</pre></div>
</div>
</div>
</div>
<p>Since that guessing doesn’t give a unique answer, the more general and reliable approach is to check for the correct UCD.  It also has the further advantage that it can be used to label columns that should be used for certain purposes when there are multiple possibilities.  For instance, this table has MatchRA and SourceRA.  Let’s check the UCD:</p>
<p>(Note that the UCD is not required.  If it isn’t there, you get a None type, so code the check carefully)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ra_name</span><span class="o">=</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">columns</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">ucd</span> <span class="ow">and</span> <span class="s1">&#39;pos.eq.ra&#39;</span> <span class="ow">in</span> <span class="n">c</span><span class="o">.</span><span class="n">ucd</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">dec_name</span><span class="o">=</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">columns</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">ucd</span> <span class="ow">and</span> <span class="s1">&#39;pos.eq.dec&#39;</span> <span class="ow">in</span> <span class="n">c</span><span class="o">.</span><span class="n">ucd</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">ra_name</span><span class="p">,</span><span class="n">dec_name</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(&#39;matchra&#39;, &#39;matchdec&#39;)
</pre></div>
</div>
</div>
</div>
<p>What that shows you is that though there are two columns in this table that give RA information, only one has the ‘pos.eq.ra’ UCD. The documentation for this ought to explain the usage of these columns, and the UCD should not be used as a substitute for understanding the table. But it can be a useful tool.</p>
<p>In particular, you can use the UCDs to look for catalogs that might have the information you’re interested in. Then you can code the same query to work for different tables (with different column names) in a loop.  This sends a bunch of queries but doesn’t take too long, a minute maybe. (One is particularly slow.)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#  Look for all TAP services with x-ray and optical data</span>
<span class="n">collection</span><span class="o">=</span><span class="p">{}</span>
<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">vo</span><span class="o">.</span><span class="n">regsearch</span><span class="p">(</span><span class="n">servicetype</span><span class="o">=</span><span class="s1">&#39;tap&#39;</span><span class="p">,</span><span class="n">keywords</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;x-ray&#39;</span><span class="p">,</span><span class="s1">&#39;optical&#39;</span><span class="p">]):</span>
    <span class="k">if</span> <span class="s2">&quot;wfau&quot;</span> <span class="ow">in</span> <span class="n">s</span><span class="o">.</span><span class="n">ivoid</span><span class="p">:</span>  <span class="k">continue</span> <span class="c1">#  These sometimes have issues</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Looking at service from </span><span class="si">{</span><span class="n">s</span><span class="o">.</span><span class="n">ivoid</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">tables</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">tables</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Problem with this service&#39;s tables endpoint.  Continuing to next.&quot;</span><span class="p">)</span>
        <span class="k">continue</span>
    <span class="c1">#  Find all the tables that have an RA,DEC and a start and end time</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tables</span><span class="p">:</span>
        <span class="n">names</span><span class="o">=</span><span class="p">{}</span>
        <span class="k">for</span> <span class="n">ucd</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;pos.eq.ra&#39;</span><span class="p">,</span><span class="s1">&#39;pos.eq.dec&#39;</span><span class="p">,</span><span class="s1">&#39;time.start&#39;</span><span class="p">,</span><span class="s1">&#39;time.end&#39;</span><span class="p">]:</span>
            <span class="n">cols</span><span class="o">=</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">t</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">ucd</span> <span class="ow">and</span> <span class="n">ucd</span> <span class="ow">in</span> <span class="n">c</span><span class="o">.</span><span class="n">ucd</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">cols</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">names</span><span class="p">[</span><span class="n">ucd</span><span class="p">]</span><span class="o">=</span><span class="n">cols</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># use the first that matches</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    Table </span><span class="si">{</span><span class="n">t</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> has the right columns.  Counting rows matching my time.&quot;</span><span class="p">)</span>
            <span class="c1">#  For a first look, a very simple query counting rows in a</span>
            <span class="c1">#  time range of interest:</span>
            <span class="n">query</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;select count(</span><span class="si">{</span><span class="n">names</span><span class="p">[</span><span class="s1">&#39;time.start&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">) from </span><span class="si">{</span><span class="n">t</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span> \
                  <span class="sa">f</span><span class="s2">&quot; where </span><span class="si">{</span><span class="n">names</span><span class="p">[</span><span class="s1">&#39;time.start&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> &gt; 52000 &quot;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">results</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Problem executing query.  Continuing to next.&quot;</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="c1">#  For this simple query, the result is a single number, the count.</span>
            <span class="c1">#   But different services might name the result differently, so</span>
            <span class="c1">#   don&#39;t assume you know the column  name.</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;    Found </span><span class="si">{}</span><span class="s2"> results from </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">results</span><span class="o">.</span><span class="n">to_table</span><span class="p">()[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="n">t</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
            <span class="c1">#  If the query above asked for the matching data rather than the</span>
            <span class="c1">#  count, you might want to collect the results.</span>
            <span class="c1">#  Careful:  here we&#39;re assuming the table names are unique</span>
            <span class="n">collection</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">name</span><span class="p">]</span><span class="o">=</span><span class="n">results</span>
</pre></div>
</div>
</div>
</div>
<p>You can also use UCDs to look at the results.  Above, we collected just the first 10 rows of the four columns we’re interested in from every catalog that had them.  But these tables still have their original column names.  So the UCDs will still be useful, and PyVO provides a simple routine to convert from UCD to column (field) name.</p>
<p>Note, however,  that returning the UCDs as part of the result is not mandatory, and some services do not do it.  So you’ll have to check.</p>
<p>Now we have a collection of rows from different tables with different columns.  In the results object, we have access to a fieldname_with_ucd() function to get the column you want.  Supposing we hadn’t already looked for this in the above loop, let’s now find out which of these tables has a magnitude column:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#ucd=&#39;pos.eq.ra&#39;</span>
<span class="n">ucd</span><span class="o">=</span><span class="s1">&#39;phot.mag&#39;</span>
<span class="k">for</span> <span class="n">tname</span><span class="p">,</span><span class="n">results</span> <span class="ow">in</span> <span class="n">collection</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="c1">#print(f&quot;On table {tname}&quot;)</span>
    <span class="c1">#  Sometimes this doesn&#39;t work well, so use a try:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">name</span><span class="o">=</span><span class="n">results</span><span class="o">.</span><span class="n">fieldname_with_ucd</span><span class="p">(</span><span class="n">ucd</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">if</span> <span class="n">name</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  Table </span><span class="si">{</span><span class="n">tname</span><span class="si">}</span><span class="s2"> has the </span><span class="si">{</span><span class="n">ucd</span><span class="si">}</span><span class="s2"> column named </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  (Table </span><span class="si">{</span><span class="n">tname</span><span class="si">}</span><span class="s2"> didn&#39;t find the UCD.)&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Lastly, if you have a table of results from a TAP query (and if that service includes the UCDs), then you can get data based on UCDs with the getbyucd() method, which simply gets the corresponding element using fieldname_with_ucd():</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">results</span><span class="o">=</span><span class="n">hsc</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s2">&quot;select top 10 * from dbo.detailedcatalog&quot;</span><span class="p">)</span>
<span class="p">[</span><span class="n">r</span><span class="o">.</span><span class="n">getbyucd</span><span class="p">(</span><span class="s1">&#39;phot.mag&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[np.float64(nan),
 np.float64(20.231000900268555),
 np.float64(20.659799575805664),
 np.float64(20.813199996948242),
 np.float64(21.020200729370117),
 np.float64(21.049100875854492),
 np.float64(20.983800888061523),
 np.float64(21.05500030517578),
 np.float64(21.337299346923828),
 np.float64(18.671100616455078)]
</pre></div>
</div>
</div>
</div>
<p>Note that we can see earlier in this notebook, when we looked at this table’s contents, that there are two phot.mag fields in this table, MagAper2 and MagAuto.  The getbyucd() and fieldname_with_ucd() routines do not currently allow you to handle multiple columns with the same UCD.  The code can help you find what you want, but it depends on the meta data the service defines, and you still must look at the detailed information for each catalog you use to understand what it contains.</p>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="votables.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">VO Tables</p>
      </div>
    </a>
    <a class="right-next"
       href="../use_case_notebooks/candidate_list_exercise.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Candidate List Exercise</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By NASA-NAVO developers
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2018-2024, NASA-NAVO developers.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>